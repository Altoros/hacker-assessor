<!DOCTYPE html>
<html lang="en" ng-app='catalogo' ng-controller="CatalogoCtrl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport"
        content="width=device-width,
                 initial-scale=1,
                 maximum-scale=1,
                 user-scalable=no">
  <title>Hacker Assessor</title>
  <!-- bower:css -->
  <link rel="stylesheet" href="vendor/bootstrap/dist/css/bootstrap.css">
  <!-- endinject -->
  <style>
    .stick-to-top {
      top: 0;
      position: fixed;
      width: 100%;
      background-color: white;
      z-index: 1;
    }

    @media (max-width: 768px) {
      .stick-to-bottom {
        bottom: 0;
        position: fixed;
        width: 100%;
        background-color: white;
      }
    }

    body {
      padding-top: 110px;
    }

    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
  </style>
</head>
<body>
  <div class='container-fluid stick-to-top'>
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <h3>Categorias y Habilidades</h3>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="input-group">
          <span class="input-group-addon">
            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
          </span>
          <input type="text"
                 class="form-control"
                 placeholder="Hace una búsqueda!"
                 ng-model='search_term'
                 ng-change="updateVisibleCategories(search_term)">
        </div>
      </div>
    </div>
    <br/>
  </div>
  <div class='container-fluid'>
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <accordion close-others="true">
          <accordion-group ng-repeat="category in categories | orderBy:+name"
                           ng-if='shouldDisplayCategory(category, search_term)' 
                           is-open="category.visible">
            <accordion-heading>{{category.name}}</accordion-heading>
            <ul class="list-group">
              <li class="list-group-item"
                  ng-repeat="skill in skills | filter:search_term"
                  ng-if="category.id === skill.category_id">{{skill.name}}</li>
            </ul>
          </accordion-group>
        </accordion>
      </div>
      <div id='form' 
           class='col-xs-12 col-sm-6 col-md-6 col-lg-6 stick-to-bottom' 
           ng-show='isVisible'>
        <button type="button"
                class="close pull-right" 
                ng-click='closeForm()'>
          <span aria-hidden="true">&times;</span>
          <span class="sr-only">Close</span>
        </button>
        <h2><small>{{skillName}}</small></h2>
        <form ng-submit='saveExperience()'>
          <div class="form-group">
            <label for="experience_level">Nivel de experiencia</label>
            <select class="form-control" ng-model='experience.level'>
              <option value='1'>No tengo conocimiento</option>
              <option value='2'>Tengo conocimiento pero no lo he utilizado</option>
              <option value='3'>Tengo conocimiento y experiencia</option>
            </select>
          </div>
          <div class="form-group">
            <label for="experience_years">Experiencia en años</label>
            <input type='number'
                   min='0'
                   class="form-control"
                   placeholder="0"
                   ng-model='experience.years'>
          </div>
          <div class="form-group">
            <label for="comment">Comentario</label>
            <textarea class="form-control"
                      rows="3"
                      style="resize:none;"
                      placeholder='Añade un comentario'
                      ng-model='comment'></textarea>
          </div>
          <button type='submit'
                  class="btn btn-primary btn-lg btn-block">Guardar</button>
        </form>
        <br/>
      </div> <!-- form -->
    </div>
  </div>
  <!-- bower:js -->
  <script src="vendor/angular/angular.js"></script>
  <script src="vendor/angular-bootstrap/ui-bootstrap-tpls.js"></script>
  <script src="vendor/angular-route/angular-route.js"></script>
  <!-- endinject -->
  <script src="app.js"></script>
</body>
</html>